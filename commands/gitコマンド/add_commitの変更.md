# [学習メモ] git add/commit の変更

## 日付  
2025-04-23

## 一括ステージングの罠
- `git add .` は変更のあった全ファイル＆フォルダを一気にステージングする
‐ そのまま`git commit -m "メッセージ"` すると、全部まとめて同じコミットメッセージになる
- あっちこっち触ってステージングすると不適切なコメントが残る

## ステージング状態での対処法
- `git status`で変更内容を確認する。
‐ `git reset <ファイル名>` 或いは `git reset`でステージングを取り消す
‐ `git reset <ディレクトリ名>` も可能

## コミット状態での対処法
‐ `git reset --soft HEAD^` で直前のコミットを取り消し、ステージング変更は残す
- `git reset --mixed HEAD^` で直前のコミットとステージングを取り消す
- `git commit --amend -m "メッセージ"` で差し替え可能
- `git rebase -i <変更したい最初のコミットの親のハッシュ>` 等の方法もあるが非推奨
- とはいえ、公開済のコミットは原則として変更しない方が良い

## そもそもの適切な方法は？
- 原則`git add <ファイル名>`を実行する
- `git add -p` や `git add -i` で　インタラクティブモードを使えば手打ちの手間が省ける
‐ それもめんどくさいならエディタ側でファイル選んで Stage ＆ Commit できる
- （Cursorだと下部の Source Control タブが便利）
- 意味のあるまとまった単位で commit を行い、ある程度まとまったら git push
- 操作ミスがあっても焦らずステージングを取り消す
- pushする前に、最後に`git status`を試す